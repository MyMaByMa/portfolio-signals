<!doctype html>
<html lang="cs"><head><meta charset="utf-8"/>
<title>Denní signály – Guru-mix</title>
<style>
 body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;padding:16px}
 table{border-collapse:collapse;width:100%}
 th,td{padding:8px 10px;border-bottom:1px solid #eee;text-align:left}
 tr:hover{background:#fafafa}.BUY{background:#e8f7ee}.HOLD{background:#f6f8fa}.TRIM{background:#fff3e6}
 .tag{padding:2px 6px;border-radius:6px;font-size:12px}.tag-bucket{background:#eef;color:#223}
 .tag-eblk{background:#ffe6e6;color:#b00020}
</style></head><body>
<h1>Denní signály – Guru-mix</h1>
<p>Aktualizováno: {{ updated }}</p>
<table><thead><tr>
 <th>Název</th><th>Ticker</th><th>Koš</th><th>Signál</th><th>Guru-mix</th>
<th>Buffett</th><th>Graham</th><th>Greenblatt</th><th>Raschke</th>
<th>Lynch</th><th>Icahn</th><th>Ackman</th>
<th>Cena</th><th>RSI</th><th>% pod 52W high</th><th>Poznámka</th><th>Blackout</th>
</tr></thead><tbody>
{% for r in rows %}
<tr class="{{ r['signal'] }}">
<td>{{ r['name'] }}</td>
<td><b>{{ r['ticker'] }}</b></td>
<td><span class="tag tag-bucket">{{ r['bucket'] }}</span></td>
<td><b>{{ r['signal'] }}</b></td>
<td>{{ "%.0f"|format(r['guru_mix']) }}</td>
<td>{{ "%.0f"|format(r['buffett']) }}</td>
<td>{{ "%.0f"|format(r['graham']) }}</td>
<td>{{ "%.0f"|format(r['greenblatt']) }}</td>
<td>{{ "%.0f"|format(r['raschke']) }}</td>
<td>{{ "%.0f"|format(r['lynch']) }}</td>
<td>{{ "%.0f"|format(r['icahn']) }}</td>
<td>{{ "%.0f"|format(r['ackman']) }}</td>
<td>{{ "%.2f"|format(r['close']) }}</td>
<td>{{ "%.1f"|format(r['rsi']) }}</td>
<td>{{ "%.1f"|format(r['dist_hi_pct']) }}</td>
<td>{{ r['why'] }}</td>
<td>{% if r['earnings_blackout'] %}<span class="tag tag-eblk">Earnings okno</span>{% endif %}</td>
</tr>
{% endfor %}
</tbody></table>
</table>

<!-- NOVÉ BLOKY – vlož sem -->
<h2>Obchodní plán</h2>
<table class="tbl">
  <thead><tr><th>Ticker</th><th>Akce</th><th>Ks</th><th>Poznámka</th></tr></thead>
  <tbody>
  {% for o in plan %}
    <tr>
      <td>{{ o.ticker }}</td>
      <td>{{ o.action }}</td>
      <td style="text-align:right">{{ o.qty }}</td>
      <td>{{ o.note }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<h2>Cílové váhy</h2>
<table class="tbl">
  <thead><tr><th>Ticker</th><th>Cílová váha</th><th>Cílová hodnota</th><th>Cílové ks</th></tr></thead>
  <tbody>
  {% for t in targets %}
    <tr>
      <td>{{ t.ticker }}</td>
      <td style="text-align:right">{{ (t.target_w*100) | round(2) }}%</td>
      <td style="text-align:right">{{ t.target_val | round(2) }}</td>
      <td style="text-align:right">{{ t.target_shares }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
<!-- KONEC NOVÝCH BLOKŮ -->

<p style="margin-top:12px;color:#666">Pozn.: Data z Yahoo Finance (yfinance); …</p>
</body>
</html>

<p style="margin-top:12px;color:#666">Pozn.: Data z Yahoo Finance (yfinance); chybějící fundamenty snižují váhu a víc rozhoduje technika.</p>
</body></html>
